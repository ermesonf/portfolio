{"title":"Gráficos","markdown":{"yaml":{"title":"Gráficos","categories":["code","analysis","plot"],"image":"image.jpg"},"headingText":"Bibliotecas","containsRefs":false,"markdown":"\n\nThis is a post with executable code.\n\n```{r}\npacman::p_load(leaflet,sf,rgdal,dplyr,stringr,\n               plotly,mapview,webshot,sp,RColorBrewer,\n               tidyr)\n\n# Mapa de casos de srag_2 por bairros ---------------------------------------\n\n## Bibliotecas\npacman::p_load(leaflet,sf,rgdal,dplyr,stringr,\n               plotly,mapview,webshot,sp,RColorBrewer,\n               tidyr)\n\n\nsrag_2023 <- rio::import('SRAGHOSPITALIZADO2026017_00.dbf')\nsrag_2022 <- rio::import('SRAGHOSPITALIZADO2026018_00.dbf')\n\n# srag_2 <- rbind(banco1, banco2, banco3)\nsrag <- rbind(srag_2022, srag_2023)\n\n# tratar bairros\nsrag2 <- srag |>\n  dplyr::mutate(NM_BAIRRO2 = str_to_sentence(NM_BAIRRO)) |>\n  dplyr::mutate(NM_BAIRRO3 = if_else(ID_MN_RESI == \"BELEM\",\n                                     case_when(\n                                       str_detect(NM_BAIRRO2, \"Aero.*\") ~ \"Aeroporto\",\n                                       str_detect(NM_BAIRRO2, \".*gua boa.*\") ~ \"Água Boa\",\n                                       str_detect(NM_BAIRRO2, \".*lind.*\") ~ \"Águas Lindas\",\n                                       str_detect(NM_BAIRRO2, \".*negra.*\") ~ \"Águas Negras\",\n                                       str_detect(NM_BAIRRO2, \".*Agulha.*\") ~ \"Agulha\",\n                                       str_detect(NM_BAIRRO2, \"Antônio lemos\") ~ \"Antônio Lemos\",\n                                       str_detect(NM_BAIRRO2, \".*Ariramb.*\") ~ \"Arirambá\",\n                                       str_detect(NM_BAIRRO2, \".*Aurá.*\") ~ \"Aurá\",\n                                       str_detect(NM_BAIRRO2, \".*do sol.*\") ~ \"Baía do Sol\" ,\n                                       str_detect(NM_BAIRRO2, \".*Barreiro.*\") ~ \"Barreiro\",\n                                       str_detect(NM_BAIRRO2, \"Batista campos\") ~ \"Batista Campos\",\n                                       str_detect(NM_BAIRRO2, \".*Bengu.*\") ~ \"Benguí\",\n                                       str_detect(NM_BAIRRO2, \"Bonfim\") ~ \"Bonfim\",\n                                       str_detect(NM_BAIRRO2, \"Brasilia|Brasília\") ~ \"Brasília\",\n                                       str_detect(NM_BAIRRO2, \"Cabanagem\") ~ \"Cabanagem\",\n                                       str_detect(NM_BAIRRO2, \"Campina\") ~ \"Campina\",\n                                       str_detect(NM_BAIRRO2, \".*Campina de ico.*|.*Campina ico.*\") ~ \"Campina de Icoaraci\",\n                                       str_detect(NM_BAIRRO2, \"Canudos\") ~ \"Canudos\",\n                                       str_detect(NM_BAIRRO2, \".*Carana.*\") ~ \"Carananduba\",\n                                       str_detect(NM_BAIRRO2, \".*Carua.*\") ~ \"Caruara\",\n                                       str_detect(NM_BAIRRO2, \".*Castanh.*\") ~ \"Castanheira\",\n                                       str_detect(NM_BAIRRO2, \".*Chap.*\") ~ \"Chapéu Virado\",\n                                       str_detect(NM_BAIRRO2, \".*velha.*\") ~ \"Cidade Velha\",\n                                       str_detect(NM_BAIRRO2, \".*Condor.*\") ~ \"Condor\",\n                                       str_detect(NM_BAIRRO2, \".*Coque.*\") ~ \"Coqueiro\",\n                                       str_detect(NM_BAIRRO2, \".*Crema.*\") ~ \"Cremação\",\n                                       str_detect(NM_BAIRRO2, \".*Cruz.*\") ~ \"Cruzeiro\",\n                                       str_detect(NM_BAIRRO2, \".*utinga.*|.*Curio.*\") ~ \"Curió-Utinga\",\n                                       str_detect(NM_BAIRRO2, \".*Farol.*\") ~ \"Farol\",\n                                       str_detect(NM_BAIRRO2, \"Fátima|Fatima\")  ~ \"Fátima\",\n                                       str_detect(NM_BAIRRO2, \".*Guam.*\") ~ \"Guamá\",\n                                       str_detect(NM_BAIRRO2, \".*Guanabara.*\") ~ \"Guanabara\",\n                                       str_detect(NM_BAIRRO2, \".*Itaiteua.*\") ~ \"Itaiteua\",\n                                       str_detect(NM_BAIRRO2, \".*Jurunas.*|.*Jorunas.*\")  ~ \"Jurunas\",\n                                       str_detect(NM_BAIRRO2, \".*Mangueirão.*|.*Mangueirao.*\")  ~ \"Mangueirão\",\n                                       str_detect(NM_BAIRRO2, \".*Mangueiras.*\") ~ \"Mangueiras\",\n                                       str_detect(NM_BAIRRO2, \".*uera.*\") ~ \"Maracacuera\",\n                                       str_detect(NM_BAIRRO2, \".*Maracajá.*|.*Maracaja.*\") ~ \"Maracajá\",\n                                       str_detect(NM_BAIRRO2, \".*Maracanga.*\") ~ \"Maracangalha\",\n                                       str_detect(NM_BAIRRO2, \".*Marah.*\") ~ \"Marahú\",\n                                       str_detect(NM_BAIRRO2, \".*Maramb.*\") ~ \"Marambaia\",\n                                       str_detect(NM_BAIRRO2, \".*Marco.*\") ~ \"Marco\",\n                                       str_detect(NM_BAIRRO2, \".*Miramar.*\") ~ \"Miramar\",\n                                       str_detect(NM_BAIRRO2, \"Terra firme|Montese\") ~ \"Montese (Terra Firme)\",\n                                       str_detect(NM_BAIRRO2, \".*Murubira.*\") ~ \"Murubira\",\n                                       str_detect(NM_BAIRRO2, \".*Natal.*\") ~ \"Natal do Murubira\",\n                                       str_detect(NM_BAIRRO2, \".*Nazar.*\") ~ \"Nazaré\",\n                                       str_detect(NM_BAIRRO2, \".*Paracu.*\") ~ \"Paracuri\",\n                                       str_detect(NM_BAIRRO2, \".*Paraíso.*|.*Paraiso.*\") ~ \"Paraíso\",\n                                       str_detect(NM_BAIRRO2, \".*guaj.*\") ~ \"Parque Guajará\",\n                                       str_detect(NM_BAIRRO2, \".*verde.*\") ~ \"Parque Verde\",\n                                       str_detect(NM_BAIRRO2, \".*Pedreira.*\") ~ \"Pedreira\",\n                                       str_detect(NM_BAIRRO2, \".*Ponta grossa.*\") ~ \"Ponta Grossa\",\n                                       str_detect(NM_BAIRRO2, \".*arthur.*\") ~ \"Porto Arthur\",\n                                       str_detect(NM_BAIRRO2, \".*Praia.*\") ~ \"Praia Grande\",\n                                       str_detect(NM_BAIRRO2, \".*Pratinha.*\") ~ \"Pratinha\",\n                                       str_detect(NM_BAIRRO2, \".*Reduto.*\") ~ \"Reduto\",\n                                       str_detect(NM_BAIRRO2, \".*Sacra.*\") ~ \"Sacramenta\",\n                                       str_detect(NM_BAIRRO2, \".*o bra.*\") ~ \"São Bras\",\n                                       str_detect(NM_BAIRRO2, \".*o clemente.*\") ~ \"São Clemente\",\n                                       str_detect(NM_BAIRRO2, \".*o francisco.*\") ~ \"São Francisco\",\n                                       str_detect(NM_BAIRRO2, \".*Sao joao.*|.*São joao.*\") ~ \"São João do Outeiro\",\n                                       str_detect(NM_BAIRRO2, \".*Sou.*\") ~ \"Souza\",\n                                       str_detect(NM_BAIRRO2, \".*curij.*\") ~ \"Sucurijuquara\",\n                                       str_detect(NM_BAIRRO2, \".*Tapan.*\") ~ \"Tapanã\",\n                                       str_detect(NM_BAIRRO2, \".*grafo.*\") ~ \"Telégrafo\",\n                                       str_detect(NM_BAIRRO2, \".*Teno.*\") ~ \"Tenoné\",\n                                       str_detect(NM_BAIRRO2, \".*Umar.*\") ~ \"Umarizal\",\n                                       str_detect(NM_BAIRRO2, \".*Una.*\") ~ \"Una\",\n                                       str_detect(NM_BAIRRO2, \".*Uni.*\") ~ \"Universitário\",\n                                       str_detect(NM_BAIRRO2, \".*Val.*\") ~ \"Val-de-Cães\",\n                                       str_detect(NM_BAIRRO2, \".*Vila.*\") ~ \"Vila\",\n                                       str_detect(NM_BAIRRO2, \".*Mosqueiro.*|.*Rural mos.*\") ~ \"Ilha de Mosqueiro\",\n                                       str_detect(NM_BAIRRO2, \".*Jararaquinha.*\") ~ \"Ilha Jararaquinha\",\n                                       str_detect(NM_BAIRRO2, \".*Outeiro.*|.*Rural de out.*\") ~ \"Ilha de Caratateua\",\n                                       str_detect(NM_BAIRRO2, \".*Tatu.*\") ~ \"Ilha Tatuóca\",\n                                       str_detect(NM_BAIRRO2, \".*Maruim.*\") ~ \"Ilha do Maruim I\",\n                                       str_detect(NM_BAIRRO2, \".*Cunha.*\") ~ \"Ilha Paulo da Cunha\",\n                                       str_detect(NM_BAIRRO2, \".*Cintura.*\") ~ \"Ilha do Cintura\",\n                                       str_detect(NM_BAIRRO2, \".*SD3.*\") ~ \"Ilha SD3\",\n                                       str_detect(NM_BAIRRO2, \".*do papa.*\") ~ \"Ilha do Papagaio\",\n                                       str_detect(NM_BAIRRO2, \".*dos papa.*\") ~ \"Ilha dos Papagaios\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha nova.*\") ~ \"Ilha Nova\",\n                                       str_detect(NM_BAIRRO2, \".*Pombas.*\") ~ \"Ilha das Pombas\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha negra.*\") ~ \"Ilha Negra\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha coroinha.*\") ~ \"Ilha Coroinha\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha jutuba.*\") ~ \"Ilha Jutuba\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha de cunu.*\") ~ \"Ilha de Cunuari\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha guaribas.*\") ~ \"Ilha Guaribas\",\n                                       str_detect(NM_BAIRRO2, \".*SD8.*\") ~ \"Ilha SD8\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do meio.*\") ~ \"Ilha do Meio\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha longa.*\") ~ \"Ilha Longa\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do comb.*\") ~ \"Ilha do Combu\",\n                                       str_detect(NM_BAIRRO2, \".*SD6.*\") ~ \"Ilha SD6\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do murutura.*\") ~ \"Ilha do Murutura\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha santa cruz.*\") ~ \"Ilha Santa Cruz\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do cruz.*\") ~ \"Ilha do Cruzador\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do maruim II.*\") ~ \"Ilha do Maruim II\",\n                                       str_detect(NM_BAIRRO2, \".*SD5.*\") ~ \"Ilha SD5\",\n                                       str_detect(NM_BAIRRO2, \".*Barra.*\") ~ \"Ilha da Barra\",\n                                       str_detect(NM_BAIRRO2, \".*Paquet.*\") ~ \"Ilha de Paquetá ou Urubuoca\",\n                                       str_detect(NM_BAIRRO2, \".*Pato.*\") ~ \"Ilha dos Patos\",\n                                       str_detect(NM_BAIRRO2, \".*Pedro.*\") ~ \"Ilha São Pedro\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do maracuj.*\") ~ \"Ilha do Maracujá\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha da concei.*\") ~ \"Ilha da Conceição\",\n                                       str_detect(NM_BAIRRO2, \".*Ilhinha.*\") ~ \"Ilhinha\",\n                                       str_detect(NM_BAIRRO2, \".*Cotij.*\") ~ \"Ilha de Cotijuba\",\n                                       str_detect(NM_BAIRRO2, \"Vila mo|Vila nosq|Vila do mos|Vila de|Vila\") ~ \"Vila\",\n                                       TRUE ~ \"Nao informado\"\n                                     ),\"Outra cidade\")) |>\n  relocate(NM_BAIRRO3, .before = 34)\n\n# Carregue o arquivo shapefile\nlml_bairros <- readOGR(dsn = \"/Users/Ermes/portfolio/posts/post-with-plot/\",\n                       layer = \"lml_belem_bairro_ilhas_simp\")\n\n\n# Faça a união dos dados com o shapefile\n# RENOMEAR COLUNA\nsrag2$NM_BAIRRO2 <- NULL\n# Renomeie NM_BAIRRO3 para NM_BAIRRO2 em srag_mapa\nnames(srag2)[names(srag2) == \"NM_BAIRRO3\"] <- \"NM_BAIRRO2\"\nsrag2$casos <- 1\nsrag_mapa <- aggregate(casos ~ NM_BAIRRO2, srag2, sum)\n\nsrag_mapamerge <- merge(lml_bairros, srag_mapa,\n                           by = \"NM_BAIRRO2\")\n\n# Agregar todas as CLASSI_FIN\nsrag_mapa <- srag2  |>\n  group_by(NM_BAIRRO2,CLASSI_FIN) |> \n  summarise(contagem = n())  |> \n  pivot_wider(names_from = CLASSI_FIN,\n              values_from = contagem, values_fill = 0) |> \n  drop_na(NM_BAIRRO2) |> \n  select(-4) #remove col NA\n\n\n# Merge\nsrag_mapamerge <- merge(lml_bairros, srag_mapa,\n                        by = \"NM_BAIRRO2\")\n\n\n# Define as cores para a rampa de cores\n# colors <- colorRampPalette(c(\"white\", \"red\"))(26)\n\n\n\n# Criar mapa control para várias categorias -------------------------------\n\nmapa_srag_c5 <- leaflet(srag_mapamerge) %>%\n  addProviderTiles(providers$CartoDB.Positron)\n\n##\nnm_categoria <- c(\"SRAG por influenza\", \"SRAG por outro vírus\",\n                  \"SRAG por outro agente etiológico\",\n                    \"SRAG não especificado\", \"SRAG por COVID-19\")\n\nfor (i in 1:5) {\n  pal <- colorNumeric(\"YlOrRd\", domain = srag_mapamerge[[as.character(i)]])\n  \n  mapa_srag_c5 <- mapa_srag_c5  |>  \n    addPolygons(\n    fillColor = ~pal(srag_mapamerge[[as.character(i)]]),\n    color = \"black\", weight = 1, opacity = 1, fillOpacity = 0.7,\n    highlight = highlightOptions(color = \"white\", weight = 2,\n                                 bringToFront = TRUE),\n    label = ~paste0(NM_BAIRRO2, \": \", srag_mapamerge[[as.character(i)]]),\n    group = nm_categoria[i]) |> \n    addLegend(\n      position = \"bottomleft\",\n      pal = pal,\n      values = srag_mapamerge[[as.character(i)]],\n      title = paste(nm_categoria[i]),\n      opacity = 1,\n      group = nm_categoria[i])\n}\n\n##\nmapa_srag_c5 <- mapa_srag_c5  |>  addLayersControl(\n  baseGroups = \"CartoDB.Positron\",\n  overlayGroups = nm_categoria,\n  options = layersControlOptions(collapsed = FALSE))\n\nmapa_srag_c5\n```\n","srcMarkdownNoYaml":"\n\nThis is a post with executable code.\n\n```{r}\n## Bibliotecas\npacman::p_load(leaflet,sf,rgdal,dplyr,stringr,\n               plotly,mapview,webshot,sp,RColorBrewer,\n               tidyr)\n\n# Mapa de casos de srag_2 por bairros ---------------------------------------\n\n## Bibliotecas\npacman::p_load(leaflet,sf,rgdal,dplyr,stringr,\n               plotly,mapview,webshot,sp,RColorBrewer,\n               tidyr)\n\n\nsrag_2023 <- rio::import('SRAGHOSPITALIZADO2026017_00.dbf')\nsrag_2022 <- rio::import('SRAGHOSPITALIZADO2026018_00.dbf')\n\n# srag_2 <- rbind(banco1, banco2, banco3)\nsrag <- rbind(srag_2022, srag_2023)\n\n# tratar bairros\nsrag2 <- srag |>\n  dplyr::mutate(NM_BAIRRO2 = str_to_sentence(NM_BAIRRO)) |>\n  dplyr::mutate(NM_BAIRRO3 = if_else(ID_MN_RESI == \"BELEM\",\n                                     case_when(\n                                       str_detect(NM_BAIRRO2, \"Aero.*\") ~ \"Aeroporto\",\n                                       str_detect(NM_BAIRRO2, \".*gua boa.*\") ~ \"Água Boa\",\n                                       str_detect(NM_BAIRRO2, \".*lind.*\") ~ \"Águas Lindas\",\n                                       str_detect(NM_BAIRRO2, \".*negra.*\") ~ \"Águas Negras\",\n                                       str_detect(NM_BAIRRO2, \".*Agulha.*\") ~ \"Agulha\",\n                                       str_detect(NM_BAIRRO2, \"Antônio lemos\") ~ \"Antônio Lemos\",\n                                       str_detect(NM_BAIRRO2, \".*Ariramb.*\") ~ \"Arirambá\",\n                                       str_detect(NM_BAIRRO2, \".*Aurá.*\") ~ \"Aurá\",\n                                       str_detect(NM_BAIRRO2, \".*do sol.*\") ~ \"Baía do Sol\" ,\n                                       str_detect(NM_BAIRRO2, \".*Barreiro.*\") ~ \"Barreiro\",\n                                       str_detect(NM_BAIRRO2, \"Batista campos\") ~ \"Batista Campos\",\n                                       str_detect(NM_BAIRRO2, \".*Bengu.*\") ~ \"Benguí\",\n                                       str_detect(NM_BAIRRO2, \"Bonfim\") ~ \"Bonfim\",\n                                       str_detect(NM_BAIRRO2, \"Brasilia|Brasília\") ~ \"Brasília\",\n                                       str_detect(NM_BAIRRO2, \"Cabanagem\") ~ \"Cabanagem\",\n                                       str_detect(NM_BAIRRO2, \"Campina\") ~ \"Campina\",\n                                       str_detect(NM_BAIRRO2, \".*Campina de ico.*|.*Campina ico.*\") ~ \"Campina de Icoaraci\",\n                                       str_detect(NM_BAIRRO2, \"Canudos\") ~ \"Canudos\",\n                                       str_detect(NM_BAIRRO2, \".*Carana.*\") ~ \"Carananduba\",\n                                       str_detect(NM_BAIRRO2, \".*Carua.*\") ~ \"Caruara\",\n                                       str_detect(NM_BAIRRO2, \".*Castanh.*\") ~ \"Castanheira\",\n                                       str_detect(NM_BAIRRO2, \".*Chap.*\") ~ \"Chapéu Virado\",\n                                       str_detect(NM_BAIRRO2, \".*velha.*\") ~ \"Cidade Velha\",\n                                       str_detect(NM_BAIRRO2, \".*Condor.*\") ~ \"Condor\",\n                                       str_detect(NM_BAIRRO2, \".*Coque.*\") ~ \"Coqueiro\",\n                                       str_detect(NM_BAIRRO2, \".*Crema.*\") ~ \"Cremação\",\n                                       str_detect(NM_BAIRRO2, \".*Cruz.*\") ~ \"Cruzeiro\",\n                                       str_detect(NM_BAIRRO2, \".*utinga.*|.*Curio.*\") ~ \"Curió-Utinga\",\n                                       str_detect(NM_BAIRRO2, \".*Farol.*\") ~ \"Farol\",\n                                       str_detect(NM_BAIRRO2, \"Fátima|Fatima\")  ~ \"Fátima\",\n                                       str_detect(NM_BAIRRO2, \".*Guam.*\") ~ \"Guamá\",\n                                       str_detect(NM_BAIRRO2, \".*Guanabara.*\") ~ \"Guanabara\",\n                                       str_detect(NM_BAIRRO2, \".*Itaiteua.*\") ~ \"Itaiteua\",\n                                       str_detect(NM_BAIRRO2, \".*Jurunas.*|.*Jorunas.*\")  ~ \"Jurunas\",\n                                       str_detect(NM_BAIRRO2, \".*Mangueirão.*|.*Mangueirao.*\")  ~ \"Mangueirão\",\n                                       str_detect(NM_BAIRRO2, \".*Mangueiras.*\") ~ \"Mangueiras\",\n                                       str_detect(NM_BAIRRO2, \".*uera.*\") ~ \"Maracacuera\",\n                                       str_detect(NM_BAIRRO2, \".*Maracajá.*|.*Maracaja.*\") ~ \"Maracajá\",\n                                       str_detect(NM_BAIRRO2, \".*Maracanga.*\") ~ \"Maracangalha\",\n                                       str_detect(NM_BAIRRO2, \".*Marah.*\") ~ \"Marahú\",\n                                       str_detect(NM_BAIRRO2, \".*Maramb.*\") ~ \"Marambaia\",\n                                       str_detect(NM_BAIRRO2, \".*Marco.*\") ~ \"Marco\",\n                                       str_detect(NM_BAIRRO2, \".*Miramar.*\") ~ \"Miramar\",\n                                       str_detect(NM_BAIRRO2, \"Terra firme|Montese\") ~ \"Montese (Terra Firme)\",\n                                       str_detect(NM_BAIRRO2, \".*Murubira.*\") ~ \"Murubira\",\n                                       str_detect(NM_BAIRRO2, \".*Natal.*\") ~ \"Natal do Murubira\",\n                                       str_detect(NM_BAIRRO2, \".*Nazar.*\") ~ \"Nazaré\",\n                                       str_detect(NM_BAIRRO2, \".*Paracu.*\") ~ \"Paracuri\",\n                                       str_detect(NM_BAIRRO2, \".*Paraíso.*|.*Paraiso.*\") ~ \"Paraíso\",\n                                       str_detect(NM_BAIRRO2, \".*guaj.*\") ~ \"Parque Guajará\",\n                                       str_detect(NM_BAIRRO2, \".*verde.*\") ~ \"Parque Verde\",\n                                       str_detect(NM_BAIRRO2, \".*Pedreira.*\") ~ \"Pedreira\",\n                                       str_detect(NM_BAIRRO2, \".*Ponta grossa.*\") ~ \"Ponta Grossa\",\n                                       str_detect(NM_BAIRRO2, \".*arthur.*\") ~ \"Porto Arthur\",\n                                       str_detect(NM_BAIRRO2, \".*Praia.*\") ~ \"Praia Grande\",\n                                       str_detect(NM_BAIRRO2, \".*Pratinha.*\") ~ \"Pratinha\",\n                                       str_detect(NM_BAIRRO2, \".*Reduto.*\") ~ \"Reduto\",\n                                       str_detect(NM_BAIRRO2, \".*Sacra.*\") ~ \"Sacramenta\",\n                                       str_detect(NM_BAIRRO2, \".*o bra.*\") ~ \"São Bras\",\n                                       str_detect(NM_BAIRRO2, \".*o clemente.*\") ~ \"São Clemente\",\n                                       str_detect(NM_BAIRRO2, \".*o francisco.*\") ~ \"São Francisco\",\n                                       str_detect(NM_BAIRRO2, \".*Sao joao.*|.*São joao.*\") ~ \"São João do Outeiro\",\n                                       str_detect(NM_BAIRRO2, \".*Sou.*\") ~ \"Souza\",\n                                       str_detect(NM_BAIRRO2, \".*curij.*\") ~ \"Sucurijuquara\",\n                                       str_detect(NM_BAIRRO2, \".*Tapan.*\") ~ \"Tapanã\",\n                                       str_detect(NM_BAIRRO2, \".*grafo.*\") ~ \"Telégrafo\",\n                                       str_detect(NM_BAIRRO2, \".*Teno.*\") ~ \"Tenoné\",\n                                       str_detect(NM_BAIRRO2, \".*Umar.*\") ~ \"Umarizal\",\n                                       str_detect(NM_BAIRRO2, \".*Una.*\") ~ \"Una\",\n                                       str_detect(NM_BAIRRO2, \".*Uni.*\") ~ \"Universitário\",\n                                       str_detect(NM_BAIRRO2, \".*Val.*\") ~ \"Val-de-Cães\",\n                                       str_detect(NM_BAIRRO2, \".*Vila.*\") ~ \"Vila\",\n                                       str_detect(NM_BAIRRO2, \".*Mosqueiro.*|.*Rural mos.*\") ~ \"Ilha de Mosqueiro\",\n                                       str_detect(NM_BAIRRO2, \".*Jararaquinha.*\") ~ \"Ilha Jararaquinha\",\n                                       str_detect(NM_BAIRRO2, \".*Outeiro.*|.*Rural de out.*\") ~ \"Ilha de Caratateua\",\n                                       str_detect(NM_BAIRRO2, \".*Tatu.*\") ~ \"Ilha Tatuóca\",\n                                       str_detect(NM_BAIRRO2, \".*Maruim.*\") ~ \"Ilha do Maruim I\",\n                                       str_detect(NM_BAIRRO2, \".*Cunha.*\") ~ \"Ilha Paulo da Cunha\",\n                                       str_detect(NM_BAIRRO2, \".*Cintura.*\") ~ \"Ilha do Cintura\",\n                                       str_detect(NM_BAIRRO2, \".*SD3.*\") ~ \"Ilha SD3\",\n                                       str_detect(NM_BAIRRO2, \".*do papa.*\") ~ \"Ilha do Papagaio\",\n                                       str_detect(NM_BAIRRO2, \".*dos papa.*\") ~ \"Ilha dos Papagaios\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha nova.*\") ~ \"Ilha Nova\",\n                                       str_detect(NM_BAIRRO2, \".*Pombas.*\") ~ \"Ilha das Pombas\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha negra.*\") ~ \"Ilha Negra\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha coroinha.*\") ~ \"Ilha Coroinha\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha jutuba.*\") ~ \"Ilha Jutuba\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha de cunu.*\") ~ \"Ilha de Cunuari\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha guaribas.*\") ~ \"Ilha Guaribas\",\n                                       str_detect(NM_BAIRRO2, \".*SD8.*\") ~ \"Ilha SD8\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do meio.*\") ~ \"Ilha do Meio\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha longa.*\") ~ \"Ilha Longa\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do comb.*\") ~ \"Ilha do Combu\",\n                                       str_detect(NM_BAIRRO2, \".*SD6.*\") ~ \"Ilha SD6\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do murutura.*\") ~ \"Ilha do Murutura\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha santa cruz.*\") ~ \"Ilha Santa Cruz\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do cruz.*\") ~ \"Ilha do Cruzador\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do maruim II.*\") ~ \"Ilha do Maruim II\",\n                                       str_detect(NM_BAIRRO2, \".*SD5.*\") ~ \"Ilha SD5\",\n                                       str_detect(NM_BAIRRO2, \".*Barra.*\") ~ \"Ilha da Barra\",\n                                       str_detect(NM_BAIRRO2, \".*Paquet.*\") ~ \"Ilha de Paquetá ou Urubuoca\",\n                                       str_detect(NM_BAIRRO2, \".*Pato.*\") ~ \"Ilha dos Patos\",\n                                       str_detect(NM_BAIRRO2, \".*Pedro.*\") ~ \"Ilha São Pedro\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha do maracuj.*\") ~ \"Ilha do Maracujá\",\n                                       str_detect(NM_BAIRRO2, \".*Ilha da concei.*\") ~ \"Ilha da Conceição\",\n                                       str_detect(NM_BAIRRO2, \".*Ilhinha.*\") ~ \"Ilhinha\",\n                                       str_detect(NM_BAIRRO2, \".*Cotij.*\") ~ \"Ilha de Cotijuba\",\n                                       str_detect(NM_BAIRRO2, \"Vila mo|Vila nosq|Vila do mos|Vila de|Vila\") ~ \"Vila\",\n                                       TRUE ~ \"Nao informado\"\n                                     ),\"Outra cidade\")) |>\n  relocate(NM_BAIRRO3, .before = 34)\n\n# Carregue o arquivo shapefile\nlml_bairros <- readOGR(dsn = \"/Users/Ermes/portfolio/posts/post-with-plot/\",\n                       layer = \"lml_belem_bairro_ilhas_simp\")\n\n\n# Faça a união dos dados com o shapefile\n# RENOMEAR COLUNA\nsrag2$NM_BAIRRO2 <- NULL\n# Renomeie NM_BAIRRO3 para NM_BAIRRO2 em srag_mapa\nnames(srag2)[names(srag2) == \"NM_BAIRRO3\"] <- \"NM_BAIRRO2\"\nsrag2$casos <- 1\nsrag_mapa <- aggregate(casos ~ NM_BAIRRO2, srag2, sum)\n\nsrag_mapamerge <- merge(lml_bairros, srag_mapa,\n                           by = \"NM_BAIRRO2\")\n\n# Agregar todas as CLASSI_FIN\nsrag_mapa <- srag2  |>\n  group_by(NM_BAIRRO2,CLASSI_FIN) |> \n  summarise(contagem = n())  |> \n  pivot_wider(names_from = CLASSI_FIN,\n              values_from = contagem, values_fill = 0) |> \n  drop_na(NM_BAIRRO2) |> \n  select(-4) #remove col NA\n\n\n# Merge\nsrag_mapamerge <- merge(lml_bairros, srag_mapa,\n                        by = \"NM_BAIRRO2\")\n\n\n# Define as cores para a rampa de cores\n# colors <- colorRampPalette(c(\"white\", \"red\"))(26)\n\n\n\n# Criar mapa control para várias categorias -------------------------------\n\nmapa_srag_c5 <- leaflet(srag_mapamerge) %>%\n  addProviderTiles(providers$CartoDB.Positron)\n\n##\nnm_categoria <- c(\"SRAG por influenza\", \"SRAG por outro vírus\",\n                  \"SRAG por outro agente etiológico\",\n                    \"SRAG não especificado\", \"SRAG por COVID-19\")\n\nfor (i in 1:5) {\n  pal <- colorNumeric(\"YlOrRd\", domain = srag_mapamerge[[as.character(i)]])\n  \n  mapa_srag_c5 <- mapa_srag_c5  |>  \n    addPolygons(\n    fillColor = ~pal(srag_mapamerge[[as.character(i)]]),\n    color = \"black\", weight = 1, opacity = 1, fillOpacity = 0.7,\n    highlight = highlightOptions(color = \"white\", weight = 2,\n                                 bringToFront = TRUE),\n    label = ~paste0(NM_BAIRRO2, \": \", srag_mapamerge[[as.character(i)]]),\n    group = nm_categoria[i]) |> \n    addLegend(\n      position = \"bottomleft\",\n      pal = pal,\n      values = srag_mapamerge[[as.character(i)]],\n      title = paste(nm_categoria[i]),\n      opacity = 1,\n      group = nm_categoria[i])\n}\n\n##\nmapa_srag_c5 <- mapa_srag_c5  |>  addLayersControl(\n  baseGroups = \"CartoDB.Positron\",\n  overlayGroups = nm_categoria,\n  options = layersControlOptions(collapsed = FALSE))\n\nmapa_srag_c5\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":true,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"github","output-file":"index.html"},"language":{"toc-title-document":"Índice","toc-title-website":"Nesta página","related-formats-title":"Outros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fonte","section-title-abstract":"Resumo","section-title-appendices":"Apêndices","section-title-footnotes":"Notas de rodapé","section-title-references":"Referências","section-title-reuse":"Reuso","section-title-copyright":"Direito autoral","section-title-citation":"Citação","appendix-attribution-cite-as":"Por favor, cite este trabalho como:","appendix-attribution-bibtex":"BibTeX","title-block-author-single":"Autor","title-block-author-plural":"Autores","title-block-affiliation-single":"Afiliação","title-block-affiliation-plural":"Afiliações","title-block-published":"Data de Publicação","title-block-modified":"Data de Modificação","callout-tip-title":"Dica","callout-note-title":"Nota","callout-warning-title":"Aviso","callout-important-title":"Importante","callout-caution-title":"Cuidado","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar o código","code-tools-hide-all-code":"Esconder o código","code-tools-view-source":"Ver o código fonte","code-tools-source-code":"Código fonte","code-line":"Linha","code-lines":"Linhas","copy-button-tooltip":"Copiar para a área de transferência","copy-button-tooltip-success":"Copiada","repo-action-links-edit":"Editar essa página","repo-action-links-source":"Ver o código fonte","repo-action-links-issue":"Criar uma issue","back-to-top":"De volta ao topo","search-no-results-text":"Nenhum resultado","search-matching-documents-text":"documentos correspondentes","search-copy-link-title":"Copiar link para a busca","search-hide-matches-text":"Esconder correspondências adicionais","search-more-match-text":"mais correspondência neste documento","search-more-matches-text":"mais correspondências neste documento","search-clear-button-title":"Limpar","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search-label":"Procurar","toggle-section":"Alternar seção","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo escuro","toggle-reader-mode":"Alternar modo de leitor","toggle-navigation":"Alternar de navegação","crossref-fig-title":"Figura","crossref-tbl-title":"Tabela","crossref-lst-title":"Listagem","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolário","crossref-prp-title":"Proposição","crossref-cnj-title":"Conjectura","crossref-def-title":"Definição","crossref-exm-title":"Exemplo","crossref-exr-title":"Exercício","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apêndice","crossref-sec-prefix":"Seção","crossref-eq-prefix":"Equação","crossref-lof-title":"Lista de Figuras","crossref-lot-title":"Lista de Tabelas","crossref-lol-title":"Lista de Listagens","environment-proof-title":"Comprovação","environment-remark-title":"Comentário","environment-solution-title":"Solução","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Pré-selecionado","listing-page-order-by-date-asc":"Mais velho","listing-page-order-by-date-desc":"O mais novo","listing-page-order-by-number-desc":"Decrescente","listing-page-order-by-number-asc":"Crescente","listing-page-field-date":"Data","listing-page-field-title":"Título","listing-page-field-description":"Descrição","listing-page-field-author":"Autor","listing-page-field-filename":"Nome do arquivo","listing-page-field-filemodified":"Arquivo modificado","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tempo de leitura","listing-page-field-categories":"Categorias","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Tudo","listing-page-no-matches":"Nenhum item correspondente"},"metadata":{"lang":"pt-br","fig-responsive":true,"quarto-version":"1.3.450","editor":"visual","theme":["cosmos","../../styles.scss"],"code-block-bg":"white","code-block-border-left":"lightgreen","title-block-banner":true,"title":"Gráficos","categories":["code","analysis","plot"],"image":"image.jpg"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}